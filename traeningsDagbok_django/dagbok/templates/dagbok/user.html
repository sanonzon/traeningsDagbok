{% load staticfiles %}
{% include "dagbok/header.html" %}

{% if user %}

<div class="chart-rect full-rect">

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#profil" aria-controls="profil" role="tab" data-toggle="tab">Profil</a></li>
    {% if user.id == request.user.id %}
    <li role="presentation"><a href="#changeProfile" aria-controls="changeProfile" role="tab" data-toggle="tab">Ändra din profil</a></li>
    {% endif %}
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane fade in active" id="profil">
      <div class="row">
        <div class="col-3">
          <img src="{% static "dagbok/img/profilepic.png" %}" class="img-center" width="150px" alt="Profilbild" />
        </div>
        <div class="col-3">
          <div class="centered-profile">
            <img src="{% static "dagbok/img/calendar2.svg" %}" width="30px" alt="Antal pass" /><span class="workoutDetailsStyling">{{ total_workouts }} pass</span>
          </div>
        </div>
        <div class="col-3">
          <div class="centered-profile">
            <img src="{% static "dagbok/img/time-passing.svg" %}" width="30px" alt="Antal pass" /><span class="workoutDetailsStyling"><!-- Räkna ut total tid här -->tid spenderad</span>
          </div>
        </div>
        <div class="col-3">
          <div class="centered-profile">
            <img src="{% static "dagbok/img/distance.svg" %}" width="30px" alt="Antal pass" /><span class="workoutDetailsStyling"><!-- Räkna ut total sträcka här --> km avverkad</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-4 profile-details">
          <p class="full-name-profile">{{ full_name.full_name }}</p>
          <ul>
            <li>
              <i class="fa fa-map-marker"></i> <span>{{extended.city}}</span>
            </li>
            <li>
              <i class="fa fa-envelope"></i> <span>{{ user.email }}</span>
            </li>
            <li>
              <strong>Senast inloggad:</strong> {{ user.last_login }}
            </li>

          </ul>
        </div>
        <div class="col-8 profile-favorite-sports">
          <h4 class="centered">Favoritsporter</h4>
          <div class="favorite-sports">
              {% for sport in sports %}
              {% if sport == "gym" %}
            <img src="{% static "dagbok/img/dumbells.svg" %}" width="80px" alt="Styrkelyftning" />
            {% endif %}
            {% if sport == "swim"%}
            <img src="{% static "dagbok/img/swimming.svg" %}" width="80px" alt="Simning" />
            {% endif %}
            {% if sport == "run" %}
            <img src="{% static "dagbok/img/running.svg" %}" width="80px" alt="Löpning" />
            {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="changeProfile">
      <div class="row">
        <div class="col-12 change_stuff">
         <form class="form-horizontal" method="POST" action="{% url "update_user" %}">
              {% csrf_token %}
          <input type="hidden" value="{{user.username}}" name="username">

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Förnamn:</label>
              </div>
              <div class="col-10">
                <input class="form-control" value="{{user.first_name}}" name="firstname">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Efternamn:</label>
              </div>
              <div class="col-10">
                <input class="form-control" value="{{user.last_name}}" name="lastname">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Email:</label>
              </div>
              <div class="col-10">
                <input class="form-control" value="{{user.email}}" name="email">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Favoritsport:</label>
              </div>
              <div class="col-10">
                <div class="checkbox">
                  <label>
                    <input type="checkbox" name="gym" {% if "gym" in sports %}checked{% endif %}>
                    Styrketräning
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" name="swim" {% if "swim" in sports %}checked{% endif %}>
                    Simning
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" name="run" {% if "run" in sports %}checked{% endif %}>
                    Löpning
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Stad:</label>
              </div>
              <div class="col-10">
                <input class="form-control" value="{{ extended.city}}" name="city">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Nytt lösenord:</label>
              </div>
              <div class="col-10">
                <input type="password" class="form-control" name="new_password">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Repetera lösenord:</label>
              </div>
              <div class="col-10">
                <input type="password" class="form-control" name="new_password_repeat">
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="row">
              <div class="col-2">
                <label class="fast-workout-label">Nuvarande lösenord:</label>
              </div>
              <div class="col-10">
                <input type="password" class="form-control" name="current_password">Måste vara ifyllt om info skall sparas
              </div>
            </div>
          </div>

          <button type="submit" class="btn btn-success">Ändra info</button>
        </form>
        </div>
      </div>
    </div>
  </div> <!-- END OF TAB-CONTENT -->

</div>
{% else %}
  DÅligt sökt
{% endif %}


{% include "dagbok/footer.html" %}
